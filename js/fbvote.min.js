function getRandomInt(e,t){return Math.floor(Math.random()*(t-e+1))+e}function statusChangeCallback(e){"connected"===e.status?startApp():document.getElementById("status").innerHTML="not_authorized"===e.status?"Please log into this app.":"Please log into Facebook."}function checkLoginState(){FB.getLoginStatus(function(e){statusChangeCallback(e)})}function startApp(){FB.api("/me",function(e){document.getElementById("status").innerHTML="Thanks for logging in, "+e.name+"!",$("#logInStuff").fadeOut(200),$("#voteSettings").fadeIn(250,function(){$("#pageIDval").focus()})})}function validatePost(){FB.api(currentValues.pageID+"_"+currentValues.postID+"/reactions?limit=1000",function(e){e.error?(console.log("error loading post"),console.log("no load"),$("#voteSettings").show(),$("#sm").text("invalid Post ID").show().fadeOut(5e3)):(thecountdown(),realTimeReactions())})}function realTimeReactions(){realtimer={LIKE:0,LOVE:0,WOW:0,HAHA:0,SAD:0,ANGRY:0},FB.api(currentValues.pageID+"_"+currentValues.postID+"/reactions?limit=1000",function(e){if(e.error)console.log("error loading post"),$("#voteSettings").fadeIn(250),$("#sm").text("Error Loading Post").show().fadeOut(3e3);else{if(e.data.length<1)return void setTimeout(realTimeReactions,2500);voteArrayCounter(e.data,e.paging.next)}})}function voteArrayCounter(e,t){return $.each(e,function(e,t){realtimer[t.type]++,realtimer[t.type]>oldvotes[t.type]&&$("#"+t.type.toLowerCase()).is(":visible")&&setTimeout(function(){animatevote(t.type)},getRandomInt(50,2500))}),t?(pageLoop(t),"loop"):(applyVotes(),"applied")}function pageLoop(e){$.getJSON(e,function(e){voteArrayCounter(e.data,e.paging.next)})}function applyVotes(){oldvotes=realtimer,$("#liken").text(realtimer.LIKE),$("#loven").text(realtimer.LOVE),$("#hahan").text(realtimer.HAHA),$("#wown").text(realtimer.WOW),$("#sadn").text(realtimer.SAD),$("#angryn").text(realtimer.ANGRY),$(".tugofwarbar").is(":visible")&&tugofwar(realtimer.LOVE,realtimer.LIKE),setTimeout(realTimeReactions,2e3)}function tugofwar(e,t){var n=t+e;$("#sidea").animate({width:t/n*100+"%"},{duration:500,queue:!1}),$("#sideb").animate({width:e/n*100+"%"},{duration:500,queue:!1}),$("#sidea").text(Math.ceil(t/n*100)+"%"),$("#sideb").text(Math.ceil(e/n*100)+"%")}function animatevote(e){e=e.toLowerCase();var t=1e3*Math.random()+500,n="div"+Math.floor(1e5*Math.random());$(".screen").append("<div class='particle' id='"+n+"'><img src='images/bubbles/"+e+".png'></div>"),$("#"+n).css({top:$("#"+e).css("top"),left:getRandomInt(parseInt($("#"+e).css("left")),parseInt($("#"+e).css("left"))+parseInt($("#"+e).css("width")))+"px"}),$("#"+n).animate({top:parseInt($("#"+e).css("top"))-200-200*Math.random()},{duration:t,queue:!1}),setTimeout(function(){$("#"+n).animate({opacity:0},{duration:200,queue:!1,complete:function(){$("#"+n).remove()}})},t-200)}function thecountdown(){timemer--,$("#countdown").text(timemer.toString().toHHMMSS()),0===timemer?realtimer.LIKE>realtimer.LOVE?$("#winnera").fadeIn():$("#winnerb").fadeIn():setTimeout(thecountdown,1e3)}var appID="410111042683836",currentValues={pageID:"",postID:""},realtimer={LIKE:0,LOVE:0,WOW:0,HAHA:0,SAD:0,ANGRY:0},oldvotes={LIKE:0,LOVE:0,WOW:0,HAHA:0,SAD:0,ANGRY:0},oldloves=0,oldlikes=0,timemer=180;String.prototype.toHHMMSS=function(){var e=parseInt(this,10),t=Math.floor(e/3600),n=Math.floor((e-3600*t)/60),a=e-3600*t-60*n;return 10>t&&(t="0"+t),10>n&&(n="0"+n),10>a&&(a="0"+a),t+":"+n+":"+a},$("#countdown").text(timemer.toString().toHHMMSS()),window.fbAsyncInit=function(){FB.init({appId:appID,cookie:!0,xfbml:!0,version:"v2.8"}),FB.getLoginStatus(function(e){statusChangeCallback(e)})},function(e,t,n){var a,o=e.getElementsByTagName(t)[0];e.getElementById(n)||(a=e.createElement(t),a.id=n,a.src="//connect.facebook.net/en_US/sdk.js",o.parentNode.insertBefore(a,o))}(document,"script","facebook-jssdk"),$("#postIDval").keypress(function(e){return 13==e.which?(e.preventDefault(),event.preventDefault,$("#savebutt").click(),!1):void 0}),$("#savebutt").click(function(){currentValues.pageID=$("#pageIDval").val(),currentValues.postID=$("#postIDval").val(),isNaN(currentValues.pageID)?FB.api(currentValues.pageID,function(e){return e.error?void $("#sm").text("Invalid Page Name").show().fadeOut(2e3):(currentValues.pageID=e.id,$("#voteSettings").fadeOut(10),setTimeout(validatePost,2e4),void 0)}):($("#voteSettings").fadeOut(10),setTimeout(validatePost,2e4))});